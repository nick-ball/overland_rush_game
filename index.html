<!-- 
		Name: Nikolas Ball
		Date: 11/10/2020
		Class: CSCI2447, Javascript Fundamentals
		Project 4
 -->

<!DOCTYPE html>
<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html">
    <title>Overland Rush (CSCI2447)</title>
    <link rel='shortcut icon' type='image/x-icon' href='./img/favicon.ico' />
    <!-- CSS styles: This is for me to worry about; not you. -->
	<link href="css/game.css" rel="stylesheet" />
    <script src="./js/jquery-3.5.1.js"></script>
    <script type="text/javascript">	
	 		
		const timeCount = () => {
			let seconds = 30;
				let countdownTimer = setInterval(() => {
				if(seconds === -1){
					clearInterval(countdownTimer);	
					alert('GAME OVER');
					document.body.innerHTML = `
					<h1 style="margin-top: 200px; margin-left:600px;">Overland Rush ⛰️</h1>
					<h3 style="margin-top: 0px; margin-left:615px;">Created By: Nikolas Ball</h3>
					`;			
				} else {
					$(".thirtySeconds").text(`${seconds} ${seconds === 1 ? 'Second' : 'Seconds'} Left`);
				}
				seconds -= 1;
				}, 1000);
		}	
		const beginGame = () => {
			timeCount();
			
			// alert('the X-axis random number is: ' + randomX());
			// alert('the Y-axis random number is: ' + randomY());
			//incrementScore(userScore);
			$(".thirtySeconds").css("visibility", "visible");
			const leftArrowPressed = () => {
            let element = document.getElementById("gameimage");
			$('#gameimage').css({ 'transform': 'rotate(180deg)'});
            element.style.left = parseInt(element.style.left) - 5 + 'px';
            }

            const rightArrowPressed = () => {
            let element = document.getElementById("gameimage");
			$('#gameimage').css({ 'transform': 'rotate(0deg)'});
            element.style.left = parseInt(element.style.left) + 5 + 'px';

            }

            const upArrowPressed = () => {
            let element = document.getElementById("gameimage");
			$('#gameimage').css({ 'transform': 'rotate(270deg)'});
            element.style.top = parseInt(element.style.top) - 5 + 'px';
            }

            const downArrowPressed = () => {
            let element = document.getElementById("gameimage");
			$('#gameimage').css({ 'transform': 'rotate(90deg)'});
            element.style.top = parseInt(element.style.top) + 5 + 'px';
            }

            const moveSelection = (event) => {
                switch (event.keyCode) {
                    case 37:
					event.preventDefault();
                    leftArrowPressed();
                    break;
                    case 39:
					event.preventDefault();
                    rightArrowPressed();
                    break;
                    case 38:
					event.preventDefault();
                    upArrowPressed();
                    break;
                    case 40:
					event.preventDefault();
                    downArrowPressed();
                    break;
                    }
                };
			window.addEventListener('keydown', moveSelection);
		}
		const randomX = () => {
			let min = 0;
    		let Xmax = 1125;
    		return Math.floor(Math.random() * (Xmax - min + 1)) + min;
		}
		const randomY = () => {
			let min = 0;
    		let Ymax = 350;
    		return Math.floor(Math.random() * (Ymax - min + 1)) + min;
		}
		var userScore = 0;
		incrementScore = userScore => {
			userScore = userScore + 1;
			document.getElementById("score").innerHTML = userScore + (userScore === 1 ? ' pt' : ' pts');
		}
		const addImage = () => {
			document.getElementById("gamespace").innerHTML = `
			<img class="jeepRight" id="gameimage" style="position:absolute;left:150px; top:525px;z-index:1000;" height="70px" width="120px" src="img/jeepRight.png" /> 
			<img class="obstacleimage" id="obstacleimage" style="position:absolute;left:650px; top:525px;" height="70px" width="100px" src="img/mountain.png" />
			<img class="obstacleimage" id="obstacleimage" style="position:absolute;left:250px; top:725px;" height="70px" width="100px" src="img/mountain.png" />
			<img class="obstacleimage" id="obstacleimage" style="position:absolute;left:550px; top:725px;" height="70px" width="100px" src="img/mountain.png" />
			<img class="obstacleimage" id="obstacleimage" style="position:absolute;left:950px; top:625px;" height="70px" width="100px" src="img/mountain.png" />
			<img class="obstacleimage" id="obstacleimage" style="position:absolute;left:1100px; top:546px;" height="70px" width="100px" src="img/mountain.png" />
			<img class="obstacleimage" id="obstacleimage" style="position:absolute;left:1080px; top:800px;" height="70px" width="100px" src="img/mountain.png" />
			`;
		}
		$(document).ready(function() {
			if(window.innerWidth < 1300 || window.innerWidth > 1550){
				alert(`Your browser width is ${window.innerWidth}px. Please use zoom-${window.innerWidth < 1300 ? 'out' : 'in'} functionality to adjust width to at least 1440px. If you do not adjust page zoom, the game may render incorrectly!`);
			};
    		let firstName = prompt("What is your first name?");
			document.getElementById("name").innerHTML = firstName;
			addImage();	
			$("#start_button").click(function(){
        		beginGame();
				$("#start_button").text("Started!")
				$("#start_button").css({
				'border' : '2px solid gray',
				'color' : 'gray'
				});
   			});
			$("#start_button").css({
   				'font-size' : '18px',
   				'width' : '150px',
   				'height' : '70px',
				'color' : 'black',
				'background-color': 'white',
				'border' : '2px solid black'
			});
			$("#start_button").mouseover(function() {
  				$(this).css({
					  "border": "2px solid gray"
				});
			});
			$("#start_button").mouseout(function() {
  				$(this).css({
					  "border": "2px solid black"
				});
			});
			
		});
    </script>
  </head>
  <body>

	<div id="content">

		<h1>Overland Rush ⛰️</h1>
			<div style=" text-align:center;">
		<div>After clicking "start", you will have 30 seconds to drive the <em>Jeep Wrangler</em> across the map using the arrow keys. <br/>Try to drive over as many boulders as you can!
			<br/>
			<span><strong>Are you ready to get started <span id="name">firstName</span>?</strong></span>
			<br/>
			<br/>
		<img class="jeepRocks" src="img/jeeprocks.jpg">
		</div>
		
		</div>
		<div id="controls">
			<span id="score">0 pts</span>
			<button type="button" id="start_button">Start!</button>
		</div>
		<div class="thirtySeconds">30 Seconds Left</div>
		
		
		<div id="gamespace" onkeydown="" onkeyup="">

			
			
		</div>
		
	</div>
  </body>
</html>